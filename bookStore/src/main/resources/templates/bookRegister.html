<!doctype html>
<html lang="en" xmlns:th="https://www.thymeleaf.com">
<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/css/bootstrap_folder/bootstrap.css">
<link rel="stylesheet" href="/css/bookstyle.css">
<title>Book Store</title>

<script src="js/jquery.js"></script>
<script src="https://unpkg.com/htmlincludejs"></script>
</head>
<body>
	<include src="/scripts/navigation_bar.html"></include>
	<div class="paper">
		<div class="jumbotron" style="margin-left:50px; margin-top:70px; margin-right: 50px;">
			<h2 class="display-4" style="color:black">Register new book</h2>
			<hr class="my-4">
			<p class="lead">
				Discover a world of literary wonders and register a new marvelous book to your collection. Dive into captivating stories, explore new realms, and savor the joy of reading. Whether it's a classic masterpiece, an inspiring memoir, or a thrilling novel, each addition to your library enriches your journey through the realm of words and imagination. Share your thoughts, leave reviews, and embrace the joy of literary exploration with every page turned. Let the adventure begin!
			</p>
          </br></br>
		</div>

		<form class="col-md-10 offset-md-1 board" th:action="@{/save_new}" method="post" enctype="multipart/form-data">
			<h3 class="display-6 d-flex justify-content-center jumbotron">Book information</h3></br>
			<div class="mb-3">
				<label for="author" class="form-label">Author</label>
				<input type="text" class="form-control" name="author" required oninvalid="this.setCustomValidity('Please enter an author name')" oninput="this.setCustomValidity('')">	
			</div>
			<div class="mb-3">
				<label for="name" class="form-label">Book Name</label>
				<input type="text" class="form-control" name="name" required oninvalid="this.setCustomValidity('Please enter a book name')" oninput="this.setCustomValidity('')">	
			</div>
			<div class="mb-3">
				<label for="genre" class="form-label">Genre</label>
				<select name="genre" id="genre" class="form-control" required oninvalid="this.setCustomValidity('Please select a genre')" oninput="this.setCustomValidity('')">
					<option value=""></option>
					<option value="belles-lettres">belles-lettres</option>
					<option value="childrens literature">childrens literature</option>
					<option value="common literature">common literature</option>
					<option value="crime">crime</option>
					<option value="fantasy">fantasy</option>
					<option value="horror">horror</option>
					<option value="romance">romance</option>
					<option value="science fiction">science fiction</option>
				  </select>
			</div>
			<div class="mb-3">
				<label for="price" class="form-label">Rating</label>
				<select name="price" id="price" required class="form-control" oninvalid="this.setCustomValidity('Please select a price')" oninput="this.setCustomValidity('')">
				  <!--<option value="null" selected disabled></option>-->
				  <option value=""></option>
				  <option value="-">-</option>
				  <option value="1">1</option>
				  <option value="2">2</option>
				  <option value="3">3</option>
				  <option value="4">4</option>
				  <option value="5">5</option>
				  <option value="6">6</option>
				  <option value="7">7</option>
				  <option value="8">8</option>
				  <option value="9">9</option>
				  <option value="10">10</option>
				</select>
			</div>
			<div class="mb-3">
				<label for="status" class="form-label">Status</label>
				<select name="status" id="status" required class="form-control" oninvalid="this.setCustomValidity('Please select a status')" oninput="this.setCustomValidity('')">
					<option value=""></option>
					<option value="did not read">did not read</option>
					<option value="want to read">want to read</option>
					<option value="...reading...">...reading...</option>
					<option value="have read">have read</option>
					<option value="love this book">love this book</option>
				</select>
			</div>
			<div class="mb-3">
				<label for="link" class="form-label">Link</label>
				<input type="text" class="form-control" id = "link" name="link" required oninvalid="this.setCustomValidity('Please enter a book link')" oninput="this.setCustomValidity('')">	
			</div>
			<div class="mb-3" >
				<div class="form-outline">
					<label class="form-label" for="textAreaExample">Short description</label>
					<textarea type="text" class="form-control description-input" name="description" id="textAreaExample" rows="5" required oninvalid="this.setCustomValidity('Please write a short description')" oninput="this.setCustomValidity('')"></textarea>					
				  </div>
			</div>

			<div class="mb-5">
				<label for="img" class="form-label">Upload an image</label>
				<input class="form-control" type="file" id="img" name="img" onchange="preview()" required oninvalid="this.setCustomValidity('Please upload an image of the book')" oninput="this.setCustomValidity('')">
				<!--<button onclick="clearImage()" class="btn btn-primary mt-3">Click me</button> JAK NA RAZIE ON PRZEKIEROWUJE NA STRONÄ˜ AVAILABLE BOOKS-->
			</div>
			<center><img id="frame" src="" class="img-fluid" /></center>
			<script>
					function preview() {
						frame.src = URL.createObjectURL(event.target.files[0]);
						const fileInput = document.getElementById('img');
						const file = fileInput.files[0];
						console.log(file);
						console.log(fileInput.files);

						if (file) {
							const reader = new FileReader();

							reader.onloadend = function() {
								const imageBytes = new Uint8Array(reader.result);
								console.log(imageBytes); // You can access the image bytes here or perform any other operations
							};
							reader.readAsArrayBuffer(file);
						}
						
					}

					function clearImage() {
						document.getElementById('image').value = null;
						frame.src = "";
					}
			</script>

			</br><center><button type="submit" class="btn btn-primary">Submit</button></center>
		</form>
	</br></br></br></br>
	</div>
    <div class="footer">
		<include src="/scripts/bottom.html"></include>
	  </div>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
		crossorigin="anonymous"></script>
	<script
		src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
		integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
		crossorigin="anonymous"></script>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
		integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
		crossorigin="anonymous"></script>

</body>
</html>

			<!--<div class="mb-3">
				<label for="image" class="form-label">Image
					</label>
					<input type="file" name="image" id="imageInput" accept="image/*"  class="form-control">
					<img id="previewImage" src="" alt="Preview Image">
					<button id="saveButton" disabled>Save Image</button>
					<script src="scripts/js_scripts/import_image.js"></script>					
			</div>-->
